/*!build time : 2013-10-18 2:40:28 PM*/
KISSY.add("gallery/scrollspy/1.0/index",function(a,b){function c(){this.refresh()}var d=Node.all,e=Node.one;return a.extend(c,b,{refresh:function(){this.targets=[],this.offsets=[],d(this.navSelector).each(function(a){var b=a.attr("data-href"),c=e(b);/^#\w/.test(b)&&c.length&&(this.targets.push(b),this.offsets.push(c.offset().top))},this)},process:function(){var a,b=this.$scrollElement.scrollTop()+this.offset,c=this.offsets,d=this.targets,e=this.activeTarget;for(b+=c[0],a=c.length;a--;)e!=d[a]&&b>=c[a]&&(!c[a+1]||b<=c[a+1])&&this.activate(d[a])},activate:function(a){var b;this.activeTarget=a,b=d(".active",this.navContainer),b&&b.removeClass("active"),d(this.activerSelector+":has([data-href="+a+"])").addClass("active")},init:function(b){var c=b;this.offset=c.offset,this.navSelector=c.navSelector,this.navContainer=c.navContainer,this.activerSelector=c.activerSelector;var e=a.bind(this.process,this),f=d(c.scrollArea);this.$scrollElement=f.on("scroll",e)}}),c},{requires:["base","sizzle"]});